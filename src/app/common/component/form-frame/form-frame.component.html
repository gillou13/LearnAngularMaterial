<div class="titleContainer">
    <h3 *ngIf="frameModel?.title != undefined">{{frameModel.title}}</h3>
    <ng-container *ngTemplateOutlet="saveButtons"/>
</div>
<h4 *ngIf="frameModel?.name != undefined">{{frameModel.name}}</h4>
<div class="buttonsContainer">
    @for(action of frameModel.actions; track action){
        <button 
            *ngIf="action.isVisible && action.action != undefined"
            mat-stroked-button 
            (click)="action.action!.next(undefined)"
            [disabled]="!action.isAvailable || action.inLoading"
            [attr.style]="'order: ' + action.order"
            >
                <mat-icon *ngIf="action.icon && !action.inLoading">{{ action.icon }}</mat-icon>
                <mat-icon *ngIf="action.inLoading"><mat-spinner diameter="20"/></mat-icon>
                {{ action.label }}
        </button>
    }
</div>
<ng-content/>
<ng-container *ngTemplateOutlet="saveButtons"/>

<!-- template de bouton save utilisÃ© en header & footer. -->
<ng-template #saveButtons>
    <p class="buttonSaveContainer">
        <!-- template pour le spinner 'global' -->
        <ng-container *ngIf="frameModel.inLoading">
            <mat-icon><mat-spinner diameter="20"/></mat-icon>
        </ng-container>
        <button 
            *ngIf="frameModel.saveVisible"
            (click)="frameModel.saveAction!.next(undefined)"
            [disabled]="!frameModel.actionEnabled || frameModel.inLoading || formData.invalid || formData.pristine"
            mat-raised-button
            >Save</button>
        <button 
            *ngIf="frameModel.saveVisible"
            [disabled]="!frameModel.actionEnabled || frameModel.inLoading || formData.invalid || formData.pristine"
            (click)="frameModel.saveCloseAction!.next(undefined)"
            mat-raised-button
            >Save & close</button>
        <button 
            (click)="frameModel!.closeAction!.next(undefined)"
            [disabled]="frameModel.inLoading"
            mat-raised-button
            >close</button>
    </p>
</ng-template>